## Description

The zig code starts at the `zigEntrypoint` function which is called from the `main` function which is located in the `Core/Src/main.c` file.
The `Core` and `Drivers` folders were generated by `STM32CubeMX` software.

To use the C implementation, type the command: `zig build -DNO_ZIG`

## Build

### Zig

```bash
# Build
zig build
# Upload using stlink-tools
zig build flash
# Rmemove .zig-cache folder
zig build clean
```

### CMake

```bash
rm -rf -- build/Debug/* && cmake --preset=Debug .
cd build/Debug
cmake --build . --target 'rebuild_cache' &&  cmake --build . -j$(nproc) --clean-first
# Flash
st-flash --connect-under-reset --freq=4000k --format=ihex write ./*.hex
```

## Options

```bash
# Use C implementation
zig build -DNO_ZIG
# Enable Float formatting
zig build -DNEWLIB_PRINTF_FLOAT
# Add Custom GCCPATH
zig build -DARM_GCC_PATH=<path>
```

## Structure

```bash
blinky
├── Core
│   ├── Inc
│   │   ├── gpio.h
│   │   ├── main.h
│   │   ├── stm32l4xx_hal_conf.h
│   │   ├── stm32l4xx_it.h
│   │   └── usart.h
│   └── Src
│       ├── gpio.c
│       ├── main.c
│       ├── stm32l4xx_hal_msp.c
│       ├── stm32l4xx_it.c
│       ├── syscalls.c
│       ├── sysmem.c
│       ├── system_stm32l4xx.c
│       └── usart.c
├── Drivers
├── src
│   └── main.zig
├── .vscode
├── blinky.ioc
├── build.zig
├── .clangd
├── .clang-format
├── .clang-tidy
├── .editorconfig
├── README.md
├── startup_stm32l476xx.s
├── stm32l476rgtx_flash.ld
└── STM32L476.svd
```
